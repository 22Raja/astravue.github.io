/* COPYRIGHT 2024 PENKLE - ALL RIGHTS RESERVED. */
(()=>{const i=window.location,a=window.document,o=a.currentScript,s="https://api.penkle.com/events";function r(t){return new RegExp(t).test(i.pathname)}let d="";function e(){var t,e,n;d!==i.pathname&&(d=i.pathname,t="PAGE_VIEW",/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(i.hostname)||"file:"===i.protocol?console.warn("Ignoring Event: localhost"):(n=o.getAttribute("data-include"),e=o.getAttribute("data-exclude"),n=n&&n.split(",").some(r),e&&e.split(",").some(r)&&!n?console.warn("Ignoring Event: Excluded by data-include or data-exclude attribute"):(e=o.getAttribute("data-domain"))?((n={}).n=t,n.h=i.href,n.d=e,n.r=a.referrer||null,(t=new XMLHttpRequest).open("POST",s,!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(n))):console.warn("Ignoring Event: Missing `data-domain` attribute on the script tag")))}var t=window.history;if(t.pushState){const n=t.pushState;t.pushState=function(...t){n.apply(this,t),e()},window.addEventListener("popstate",e)}"prerender"===a.visibilityState?a.addEventListener("visibilitychange",()=>{d||"visible"!==a.visibilityState||e()}):e()})();